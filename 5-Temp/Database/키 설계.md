---
created: 2024-03-02T22:41:32
date: 2024-03-03T11:41
updated: 2024-03-31T22:43
---
Mysql특성상 순차적인 인덱스에 최적화되어 있어서 uuid4보다 uuid1을 쓰는게 성능상 더 유리하다며 쓴글을 몇개본 것 같아요
uuid가 됐든, seq key가 됐든, id가 됐든 nickname이 됐든
뭐든 하나는 노출해야되긴 합니다
제 경우는 그냥 seq key를 URI를 노출했는데
그걸 노출하나 ID를 노출하나 뭐가 크게 다를까
어차피 URI 설계에서 자원의 key가 ID로 통일돼있다면
ID만 알면 여기저기 찔러볼 수 있는 거고
그게 Seq Key라면 그걸로 여기저기 찔러볼 수 있는 거고
그럼 그게 보안상 유의미하게 다를까?라는 의문이 있어서 그렇게 했어요
Key는 노출하지 않는게 좋다라는 얘기도 듣기는 했는데 무슨 의미인진 알지만 아직 크게 와닿진 않아서
다른 분들 의견도 궁금하네요
그리고 ID와 Nickname 중에 고민이신 거면... 보안상 더더욱 유의미한 차이가 있을까라는 의문입니다. 개인적으로는요
Nickname은 중복이 가능하다라는 요구사항에 대응할 수는 없어지겠네요
API 바꾸면 되긴 하겠지만
말하다보니 생각났는데 불편한 이유가 이거였던 거 같아요
Key로 사용하는 Nickname이 비즈니스에 종속성이 있다
회원정보의 경우 seq key를 쓰면 회원수를 예측할 수도 있고, 탈퇴 여부나 이런저런 정보가 노출되는 거라서 nickname이 보안상 이점이 있다고 생각했어요. nickname 중복불가는 정책적으로 보장이 되는 부분이라서요 (중복이 필요하다면 display 전용 필드로 빼주는 느낌?)
변경되는걸 잡는게 더  안좋고
걍 uuid  때려박아도 성능이슈 크게 안납니다
아 그리고 참고로 말씀드리면, URI 조회할 때 식별자로 사용하는 속성이 API마다 다르면 URI 설계 개판됩니다...
다들 말씀 감사합니다.

이야기를 들어보니 api 레벨에서는 인덱스 없이 nickname을 사용하고, 나중에 쿼리 성능에 문제가 생기면 uuid에 인덱스를 걸어서 대체해주는 방법을 써야겠다는 생각이 드네요.

이 API에서는 PathVariable이 Nickname인데 딴데서는 ID고 이러면 ㅋㅋㅋ